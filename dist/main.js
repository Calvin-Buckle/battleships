(()=>{"use strict";const e=class{constructor(e){this.hits=[],this.size=e}hit(e){return this.hits.push(e)}isSunk(){return this.position.every((e=>this.hits.includes(e)))}isHit(){return this.hits.some((e=>this.position.includes(e)))}},t={Carrier:new e(5),BattleShip:new e(4),Cruiser:new e(3),Submarine:new e(3),Destroyer:new e(2),EnemyCarrier:new e(5),EnemyBattleShip:new e(4),EnemyCruiser:new e(3),EnemySubmarine:new e(3),EnemyDestroyer:new e(2)};document.addEventListener("gameboardReady",(()=>{document.getElementById("playerBoard");let e,n,r,i=document.querySelectorAll(".ship"),l=document.querySelectorAll(".block");i.forEach((e=>{e.addEventListener("dragstart",(()=>{console.log("dragging")}))})),document.addEventListener("dragstart",(t=>{e=t.target.getAttribute("Id")})),l.forEach((i=>{i.addEventListener("dragover",(l=>{if(l.preventDefault(),n=t[e].size,!r){let e=i;for(let t=0;t<n;t++)e.classList.add("hovered"),e=e.nextElementSibling;r=!0}}))})),l.forEach((e=>{e.addEventListener("dragleave",(()=>{r=!1;let t=e;for(let e=0;e<n;e++)t.classList.remove("hovered"),t=t.nextElementSibling}))})),l.forEach((r=>{r.addEventListener("drop",(()=>{n=t[e].size,console.log("dropped"),console.log(n);let i=r;for(let e=0;e<n;e++)i.classList.add("selected"),i.classList.remove("hovered"),i=i.nextElementSibling}))}))})),document.addEventListener("gameboardReady",(()=>{let e=document.getElementById("enemyBoard");function n(){return Math.floor(100*Math.random())+0}function r(r){let s=n(),o=e.firstElementChild,a=0;for(let e=0;e<s;e++)o=o.nextElementSibling;for(let e=0;e<t[r].size;e++){if(o.classList.contains("selected"))return void i(o,r,a);if(a++,o.classList.add("selected"),o.classList.add(r),!o.nextElementSibling)return void l(o,r,a);o=o.nextElementSibling}}function i(e,t,n){for(let r=0;r<n;r++)(e=e.previousElementSibling).classList.remove(t),e.classList.remove("selected");return n=0,r(t)}function l(e,t,n){for(let r=0;r<n;r++)e.classList.remove(t),e.classList.remove("selected"),e=e.previousElementSibling;return n=0,r(t)}var s;s="EnemyCarrier","horizontal"===function(){let e;return e=Math.floor(100*Math.random())+0<=50?"vertical":"horizontal",e}()?r(s):function r(i){let l=e.firstElementChild,s=n();for(let e=0;e<s;e++)l=l.nextElementSibling;let o=function(e,n){let r;for(let i=0;i<t[e].size;i++){if(n.classList.contains("selected")){r=!1;break}if(!n.nextElementSibling){r=!1;break}for(let e=0;e<10;e++){if(!n.nextElementSibling){r=!1;break}n=n.nextElementSibling,r=!0}}return r}(i,l);if(o)for(let e=0;e<t[i].size&&(l.classList.add("selected"),l.classList.add(i),e!=t[i].size-1);e++)for(let e=0;e<10;e++)l=l.nextElementSibling;else r(i)}(s)})),new class{constructor(){this.board=this.generateDomBoard(),document.dispatchEvent(new Event("gameboardReady"))}generateDomBoard(){let e=document.getElementById("playerBoard"),t=document.getElementById("enemyBoard");for(let n=0;n<10;n++)for(let n=0;n<10;n++){let n=document.createElement("div"),r=document.createElement("div");e.appendChild(n),t.appendChild(r),n.classList="block",r.classList="eBlock"}}}})();